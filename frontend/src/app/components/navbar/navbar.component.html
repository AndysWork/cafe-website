<!-- Mobile Menu Toggle -->
<button class="mobile-menu-toggle"
        [class.active]="isMobileMenuOpen"
        (click)="toggleMobileMenu()">
  <span class="hamburger-line"></span>
  <span class="hamburger-line"></span>
  <span class="hamburger-line"></span>
</button>

<!-- Mobile Overlay -->
<div class="mobile-overlay"
     [class.active]="isMobileMenuOpen"
     (click)="closeMobileMenu()"></div>

<nav class="navbar" [class.mobile-open]="isMobileMenuOpen">
  <div class="navbar-container">
    <!-- Logo -->
    <a routerLink="/" class="navbar-brand" (click)="closeMobileMenu()">
      <img src="/Logo.jpg" alt="Maa Tara Cafe Logo" class="brand-logo">
    </a>

    <!-- Desktop Menu -->
    <div class="navbar-menu" [class.active]="isMobileMenuOpen">
      <ul class="navbar-nav">
        <!-- Menu (Users Only) -->
        <li class="nav-item" *ngIf="isUser">
          <a routerLink="/menu" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon">ğŸ½ï¸</span>
            Menu
          </a>
        </li>

        <!-- Regular User: Orders -->
        <li class="nav-item" *ngIf="isUser">
          <a routerLink="/orders" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon">ğŸ›’</span>
            Orders
          </a>
        </li>

        <!-- Regular User: Offers -->
        <li class="nav-item" *ngIf="isUser">
          <a routerLink="/offers" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon">ğŸ</span>
            Offers
          </a>
        </li>

        <!-- Regular User: Loyalty Points -->
        <li class="nav-item" *ngIf="isUser">
          <a routerLink="/loyalty" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon">â­</span>
            Loyalty Points
          </a>
        </li>

        <!-- Profile (Users Only) -->
        <li class="nav-item" *ngIf="isUser">
          <a routerLink="/profile" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon">ğŸ‘¤</span>
            Profile
          </a>
        </li>

        <!-- Cart (Users Only) -->
        <li class="nav-item cart-item" *ngIf="isUser">
          <a routerLink="/cart" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon cart-icon">
              ğŸ›’
              <span class="cart-badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
            </span>
            Cart
          </a>
        </li>
      </ul>

      <!-- Login/Logout Button -->
      <div class="auth-section">
        <button *ngIf="!isLoggedIn" class="btn-login" (click)="onLogin()">
          <span class="login-icon">ğŸ”</span>
          Login
        </button>

        <!-- Admin Profile Dropdown -->
        <div *ngIf="isLoggedIn && isAdmin" class="profile-dropdown"
             [class.active]="activeDropdown === 'profile'"
             (mouseenter)="openDropdown('profile')"
             (mouseleave)="scheduleCloseDropdown()">
          <button class="profile-badge"
                  (click)="toggleDropdown('profile')">
            <span class="profile-icon">ğŸ‘¤</span>
            <span class="username">{{ displayName }}</span>
            <span class="arrow" [class.open]="activeDropdown === 'profile'">â–¼</span>
          </button>

          <ul class="dropdown-menu profile-menu"
              [class.show]="activeDropdown === 'profile'"
              (mouseenter)="cancelCloseDropdown()"
              (mouseleave)="scheduleCloseDropdown()">
            <li>
              <a routerLink="/profile"
                 routerLinkActive="active"
                 class="dropdown-item"
                 (click)="closeMobileMenu()">
                <span class="dropdown-icon">âœï¸</span>
                <div class="dropdown-content">
                  <span class="dropdown-title">Edit Profile</span>
                </div>
              </a>
            </li>
            <li>
              <a routerLink="/admin/outlets"
                 routerLinkActive="active"
                 class="dropdown-item"
                 (click)="closeMobileMenu()">
                <span class="dropdown-icon">ğŸª</span>
                <div class="dropdown-content">
                  <span class="dropdown-title">Outlets</span>
                </div>
              </a>
            </li>
            <li class="divider"></li>
            <li>
              <button class="dropdown-item logout-item" (click)="onLogout()">
                <span class="dropdown-icon">ğŸšª</span>
                <div class="dropdown-content">
                  <span class="dropdown-title">Logout</span>
                </div>
              </button>
            </li>
          </ul>
        </div>

        <!-- Regular User Display -->
        <div *ngIf="isLoggedIn && isUser" class="user-section">
          <span class="username">{{ displayName }}</span>
          <button class="btn-logout" (click)="onLogout()">
            <span class="logout-icon">ğŸšª</span>
            Logout
          </button>
        </div>
      </div>
    </div>
  </div>
</nav>
