<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <a routerLink="/" class="navbar-brand" (click)="closeMobileMenu()">
      <img src="/Logo.jpg" alt="Maa Tara Cafe Logo" class="brand-logo">
    </a>

    <!-- Desktop Menu -->
    <div class="navbar-menu" [class.active]="isMobileMenuOpen">
      <ul class="navbar-nav">
        <!-- Admin Only: Menu Update -->
        <li class="nav-item" *ngIf="isAdmin">
          <a routerLink="/menu" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon">ğŸ½ï¸</span>
            Menu Update
          </a>
        </li>

        <!-- Admin Only: Category Update with Dropdown -->
        <li class="nav-item dropdown" *ngIf="isAdmin"
            [class.active]="activeDropdown === 'category'"
            (mouseenter)="openDropdown('category')"
            (mouseleave)="scheduleCloseDropdown()">
          <button class="nav-link dropdown-toggle"
                  (click)="toggleDropdown('category')">
            <span class="nav-icon">ğŸ“</span>
            Category Update
            <span class="arrow" [class.open]="activeDropdown === 'category'">â–¼</span>
          </button>

          <ul class="dropdown-menu"
              [class.show]="activeDropdown === 'category'"
              (mouseenter)="cancelCloseDropdown()"
              (mouseleave)="scheduleCloseDropdown()">
            <li>
              <a routerLink="/category/upload"
                 routerLinkActive="active"
                 class="dropdown-item"
                 (click)="closeMobileMenu()">
                <span class="dropdown-icon">ğŸ“¤</span>
                <div class="dropdown-content">
                  <span class="dropdown-title">Upload</span>
                  <span class="dropdown-desc">Bulk upload via CSV/Excel</span>
                </div>
              </a>
            </li>
            <li>
              <a routerLink="/category/crud"
                 routerLinkActive="active"
                 class="dropdown-item"
                 (click)="closeMobileMenu()">
                <span class="dropdown-icon">âœï¸</span>
                <div class="dropdown-content">
                  <span class="dropdown-title">CRUD</span>
                  <span class="dropdown-desc">Manage categories manually</span>
                </div>
              </a>
            </li>
          </ul>
        </li>

        <!-- Regular User: Orders -->
        <li class="nav-item" *ngIf="isUser">
          <a routerLink="/orders" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon">ğŸ›’</span>
            Orders
          </a>
        </li>

        <!-- Regular User: Offers -->
        <li class="nav-item" *ngIf="isUser">
          <a routerLink="/offers" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon">ğŸ</span>
            Offers
          </a>
        </li>

        <!-- Regular User: Loyalty Points -->
        <li class="nav-item" *ngIf="isUser">
          <a routerLink="/loyalty" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            <span class="nav-icon">â­</span>
            Loyalty Points
          </a>
        </li>
      </ul>

      <!-- Login/Logout Button -->
      <div class="auth-section">
        <button *ngIf="!isLoggedIn" class="btn-login" (click)="onLogin()">
          <span class="login-icon">ğŸ”</span>
          Login
        </button>
        <div *ngIf="isLoggedIn" class="user-section">
          <span class="username">{{ currentUser?.username }}</span>
          <button class="btn-logout" (click)="onLogout()">
            <span class="logout-icon">ğŸšª</span>
            Logout
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div class="mobile-overlay"
     [class.active]="isMobileMenuOpen"
     (click)="closeMobileMenu()">
</div>
